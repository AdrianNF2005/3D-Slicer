
// copyright arjan westerdiep / www.drububu.com
// for personal non-commercial use only

eval((function(x){var d="";var p=0;while(p<x.length){if(x.charAt(p)!="`")d+=x.charAt(p++);else{var l=x.charCodeAt(p+3)-28;if(l>4)d+=d.substr(d.length-x.charCodeAt(p+1)*96-x.charCodeAt(p+2)+3104-l,l);else d+="`";p+=4}}return d})("function removeArray(a) {if ` #!while (a.length > 0) {a.pop();}` /%= 0;a = null;}}` i+ObjectProperties(e) {var c, b, d;if ` /!d = ` G\".keys(e)` 6!d) {b = d`!(#;for (c`!1! c < b; c += 1`!t#`\"$!.is`\"+\"e[d[c]]) && ` %#`!p$!==`\"-!`\"T(` G$;} else` l\"typeof` W$ === \"o`!e!\"` l'` k!null` j%`\"I.` n,delete` Z$;}}}}`#*3(f`#$/f) {try`\"D0f)`\"h#f`\"E&`\"=-f`!@&f`$W&`\"H.f`\"C-f`\"+?f);`$d,f);`$CE`\"u#f`\"q' catch (g) {generateErrorMessage(\"`!E\" `!d\" :: something went wrong ( \" + `\"4%+ \" /` .!g` '!)...\");return;`$&(getFormattedNumber`$/%e, d, c;e = f >> 0;c = \"\"`'[\" >= 1000000`'e#(e /` +$` K!) %` +!;`\"^!` F)000 ? d < 10 ? \"00\" :` )#` +\"\" : \"\" : \"\") + d + \".\";}`!0)`!*,` w<` ]S` }#` a8` LJe` ^$`$-\" c;`#}2Memor`,_\"` C#a` p!48576 ? (a`\"T!24).toFixed(2)`%.!kb.\" :` H#73741824` H&` \\!` D-m` O\"` =#` N$` 6-gb.\";}var SHOW_INFO = false, MULTIPLIER_Y = 4096` ()Z =` 6**` \"), BITFIELD_ENCLOSED_VOXELS = 63;var _kvxView`*;#, _byteCounter, _globalVoxelColor = (12517376) | 48896 | 191` ;/Shell` 5:pal`*&!= [0, 0, 0, 31, 23, 11,` \"\"5, 7, 75, 75` \"\"251, 251` \"$7, 27` \"\"19, 19,` \"\"1` `\"11` \\\"` c!47, 55`!!\"35, 4` |#23` .\"7` %&0, 79, 59` @\"71, 5` O#63` .\"`!2!`!?+47, 171, 17` *!3, 163, 163, 235, 151, 1` H!31, 1` >!` j!`\"L!` >!35, 2`\"!!` /!23, 2`\"'\"5, 1`!^!03, 107, 10`\"U!9, 99, 9`\"Z!1, 91, 91, 187, 87, 8`!U!9`\"1\"79, 1`#M!1`\"6\"167`\"3\"`!d%5`\"W#155`\"U\"`!o%4`#C#`!q!4`\"f#139`\"x\"`!{\"1`#^#1, 1`$6)19`#Z\"`% \"5`$F'`\"#!`\"|!, 1`\":!`$X#9`%>#`\"+\"` $\"83`$n%9`%u$71` \"$67` \"$`$0,`$@+`$O+`$^+`$m+` %X`%N&`\"W\"9`%P$`&J\"`#V!`\"S!7`%A$47`$h\"2`\"k!39`\"X\"2`#!!31`\"\\\"`%@\"2`\"_#`%3!` {!75`%%#` z!`&f%111`\"v\"`!5\"0`%,#`!5!9`%'$43`#l\"`!J!35`%s\"`%7!2`#q#`\"'!1`%#`%7!07`! \"`!a!5` ~\"` V!`&*#`(w!` m#2`!/#47`%?\"`&-!3`%>\"43`%y#`\"p!`%e!`%j!` %!`(J$` $\"`#B!`#G!`(8\"`#%!`#*!` %!1`(K#` $\"0`#$$`#+\"`(?\"`#-!`#.%`#7!`(K\"3, 183` \"$`(E\"`(K!` %!`#D%`(N%`(W!` $\"`(K\"`(Q!` %!`(K$` $\"`(O\"`(U!`$a!9`$r#` ##1`$s#` $\"`(I!`(N!`(O%`#p!` ##`$g$` $\"`*_&0`%p#`*h%`*a'`*_(`*^(`*]$7`%X#`*g!7`*Y&` #!`$X#55`*W&47`%-\"`*V!`*T'`,Z!`'s*`!b!`'q\"`,T\"`$R$95`%m\"`'T!8`*=#`$$!79`%{\"`,>&`%U!9`,A#`#?$5`.k#`#1!` )$`'s!`,6!`\"h#`!R!` j#27`&l\"6`&[#`&^$`,&$`&]!`+u#`(i!`%R$`!.\"`%Q%`$~!` H!`!T\"`$M%` >&`$G!` >&` q!`![!` C!`$L!`%F!`\"e!`%A%15`\"`#`%D!`\"q$` <%`*3\"`)$#`!6!1`$v#`!4!03`)/&` :$5`*!#`$q!`+6#`)=$`!Y#1`!;#`!o%`\"?!`!9%`!\"\"`*8$`$[$8`#4#`$K!`*\"#`3/$`3&!`!)#`'B\"`,E$`!#!`2'%`\"7!`2&%7`',$`&q#83`+{#`' $9` l\"6`4.#43`%9&`+#!`.J+`3B%87`.$$`#!%9`$R!`'J#`$_\"2`,G#`-N\"`&f!`$V#6`1)\"`&1%`/{~` $63`2K%22`2A&15` \"%0`![\"0`'3#` $#`3!&`&~!` $#5` N%`&Y!` $#` n&`\"M!` $#` n&` m&`!P~` #A`\"^.`\"Z'`\"O'`\"C(`\"q&0` N%`*}!` n~` ##`)(\"`2J!`'&#`*~#`-X#`(3\"`'?!`-b#`2(%`/A!`'?#`\"9#`,3!7`\"0\"`'K!`% #`!)~`/_$`0V!`#r\"`+S!`#g#`-!!4`!G\"`(i!3` 2\"`+#%9`!f\"47`+&\"5` <#19` *&1`$E%`\";#0` V\"` $\"` v#0` r%0`#N\"`'<$`!^[`%Y#` #!`\"4!`&#$`$J!`%z$`/t\"`3%`!6\"`!<\"`!B\"`!H\"`!N\"`!T\"` \"5];function init() {postMessage({event:\"ready\"});}` F%generateError` H$b, a) {if (a === void 0) {a = true;}` l0error\", m` 2\":b, beacon:a`!()storeByte(a) {try {_kvxView.setUint8(_byteCounter, a,`!3!);} catch (b) {`!i1\"'` w%' failed ( \" + getFormattedNumber` y)) + \"/` 14`!Y$byteLength` K!` t#b` '!) )...\");}` l( += 1`\"O,Short`\"Z\"his.`\"h' & 255);` '->> 8` 5$` _+In` 1W` )016` \"824`!5/aveData(w) {var Q, P, u, G, t, A, s, q, v, i, R, E, C, B, H, J, r, n, I, N, c, g, k, m, f, M, S, L, o, l, d, D, h, p, F, K;if (SHOW_INFO) {console.log(\" kvx`!Y! data`$9#p = `!r%(b, e`'n\"return {x:b, y:k - 1 - a, z:e};};F` L)a` T!b` O&\"\" + (a + e * MULTIPLIER_Y`%`!` &)Z);};G = w.lookup.l`&3!;K = {}`\"1!G <=`)5!`'U2no voxels present\");`!D\";}for (Q = 0; Q < G; Q`&f!) {u = G`\"5#Q;h`!9'[u];E = h.x;C` #!y;B` #!z;K[F(`$N#)] = {bitfield:h.` #$`!q\"!(u % 2500)) {`\"1+ = u;}}removeObject(` ;$);`(M)= 0;c`!Y!width + 1;k` +!height` ,!g` ,!dep` :#q = -1;m = c * g * k;o = m * 3 + 500000;t = false;d = [];S ` \"!`%p:> dimension`*U!c`*U!`+1!`*_!\" + k);}var j = [[-`1<#], [`1G#], [0, ` 5!` %#1` -&` 5!` \"&1]];D`&J)U, y, V`)\"#X, Z, b, W, Y, z, x, T, e;z`#<!if (U =`&\"\"z |`,)!` /\">= c -`%N!` 4!2` 3\"y` A)4` -$>= g` B(8` 3\"V` n*6` .$>= `([!` 2$32;}x`!M!`&v!Z`&u\"Z < 6; Z`&s$b = U + j[Z][0];W = y` ($1];Y = V` ($2];X`$]%if (b >= 0 && b < c && W` *%W < g && Y` *%Y < k) {T = p(`#=#);e =`*$#T.x + T.y`)}.T.z`* -`'x!K.hasOwnProperty(e)) {X`33%`\"{!X =` *\") {x`#4! << Z >> 0;}}` .!z`*&# x;};`3#!L = new ArrayBuffer(o * Int8` /!.BYTES_PER_ELEMENT`3)'O) {n = \"alloca`&(!'kvx`2|(;n +=`2U)Memory` f=`2\\\"...\";`,81n)`)-!`\"]\"`##!t) {`\"1!`3U$`\"6#DataView(L`!h0m`!J! `!t+View' went wrong`41#O`!)I`!L'`2M%Int(0`2[(Int(c`2l(Int(g` 2,k`%F\"`+<(`!y!`+4%s`+3'x`+5'` &\"k;`+j(n);}`!2+ / 2 * 256`%m!`!?- ` \":(`)S#` 6(`,{9file position:`!_!`.~();}l`-x\"`*7!E`*6\"E < c; E`*4$l[E]` ;'C` @\"C`)R!+ 1; C` >([C` F#}}i`+-&` d3` `-` b'M` T&B` <\"B < k; B` :$s = 15 + i * (84 / Math.max(1, m))`)R\"if (` 4!abs(s - q) >= 1 && typeof s === \"number\") {q = s;post`&L${event:\"progress_saving\", percentage:s / 100});}v`,z%h`,B!`3|$;A = F(h.x, h.y, h.z`$a\"`+q-A)) {h = K[A];R = `4I&` M!(R & BITFIELD_ENCLOSED_VOXELS) !==` #7{v`([$I = 95` m!R >> 6` U!0) {I =` ,$) - 1;} else` 0%& 63) ` l7 ? _globalVoxelColorShell :` '.;}r = I >> 16 & 255;J` *$8` *#H` ,!` &\"f = 10000000;G = _pallete.length`%y\"Q`%y\"Q < G; Q += 3) {P =`%j\"pow(` Q$[Q] - H, 2) +` +0 + 1] - J` &92] - r, 2`$t\"Q`3h! || P < f) {f = P`#t!Q / 3`0Y$`,g\"v && B =`4$# || !` /!M !`$2\"h = {};h.z = B - M`!#!` J+) {S[M] = I;M`(Q!;}h.`'_\"Of`#s!s = M;h.visibility`)-&`#-'M`#1#1) {` @)|= D`'T#h.z + Q);}h.lookup`$p!s`+1'` Y5` D([Q] = S[Q];}`+K#[`+S#`$p#] = h`1I\"v`\"00`&}#`+<\"}i` /#}}d[0]`,&*1`,-#`,c\"`,/%`,O'`,'3G = l[E - 1`!N'`&75` o\"+= 3;` \"!` P'[Q]`$$+;}}d`.N\"d` @#;` +!+= i`\"P\"`/6WG =`\"H#`.i,G`\"V'`!($(` F!) * 4`!;%c * (`/v!`1E!` q]`#$,`$&#`#/%`2V*d[Q]`27; x offset`!)!Q + \"/\" +`\"$%+ \" >`!K%` @!d[Q]` 3!/ delta` '*` )&`*\"$? 0 :` ;\"- d[Q`$A!));`)z\"`\"-\\`2w3` ^9x` i\"E);}`3)\"`4-<`'^\"`'A#`&mS`'(4`$!:\" + C`$,&`&$#+ \" c`\"b\"` =!B);}`%1!Short(B);B`'{#`\"hx`\"v<`\"}/`!19`&=%`$8$`\"C!y` '\"`\"`! / entries` /\"G`( /`#w(h`!8&[Q]`!--A = \"\"`$_\"P` \\\"P < 6; P` Z$A += `/9)>> P & 1 ? \"1\" : \"0\";}}`)0&Byte(h.z);` #-`%.*` ./` ~&)`!F-` O,`!['` W-`07)P])`3&%`$pWN =` &)`'l-256`+v1`!O!_pallete[Q * 3] >> 2`\"P-` 7* + 1]` \"C2` A$}Q`!W,`!h(`!h!`\"K9`#^\" of bytes`,d\"N - 4));`${'Int` 0#` q,Q;try {L = L.slice(0,`#=, catch (O) {n = \"slicing 'kvx' failed (`!:!O`'v!)...\";generateErrorMessage(n);t = true;}}removeObject(w);post` B${event:\"progress_saving\", percentage:1}`0O\"!t) {` J0save\", kvx:L}, [L`&<!onm` B\" = func`*&!(b) {var h, p, q, n, g, k, j, f, m, d, o;f = b.data;m = f && f.hasOwnProperty(\"`!<!\") ? f.` '! : undefined;swi`#P!m) {case `!e! data\":_global`(W!`(4! = f.v` &%;` 0-Shell` 7+` /!;h = false;j` 6&Data.content.byteL`-/! / (3 * Uint32Array.BYTES_PER_ELEMENT);var c = 1000000`%~\"` n(`*-\" = new ` b!(c`%~'l) {d = \"alloca`#x!'` N\"`&'$`%|!d += getFormattedN`'l!(c`0p\"`&+7d)`\"S!`&@\"`!Z!o`!G#`\"0'(`\"Z/`!F<viewC` E\"`!^)`!$>q = -1`,#\"n`,#\"!h && n < j; n`,%$p = 5 + n * (15 / Math.max(1, j - 1)) >>`*w#` 8!abs(p - q) >= 1 && typeof p === `+$#\") {q = p`(WNp / 100});}g =`!A\" - n;k = g * 3`%/4[n] = {bitfield:o[k], x:o[k`-p\"& 65535, y` *&>> 16` 0&z` 3#2` E%}`$;*`#_%`#t1\"initializing `%$#`,K*l`&)&);`1:!!(g % c)) {if (g == 0)`\".0.l`(X\"= j;} else` *8+= c` |\"` ^1`!V$= null;`&q/` 3$`!#$`#g-` >&`*;0`/^%`$Q!`*,>`#[)`#I2`0(%` }#`0&+`#O)`(sa`$c?`!B&view`!,A}}`%3\"h) {saveData`!A();}break;default:;}};init();"))